<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Lista de Usuarios</title>
    </h:head>
    <h:body>
        <div class="title"> Lista de Usuarios </div>
        <hr></hr>
        <f:metadata>           
            <f:viewAction action="#{listaUsuarioBean.onload}" />
        </f:metadata>
        <h:form>
            <h:dataTable value="#{listaUsuarioBean.listaUsuarios}" var="usuario" border="1">            
                <h:column>
                    <f:facet name="header">Codigo</f:facet>
                    <h:outputLabel value="#{usuario.idUsuario}">                       
                    </h:outputLabel> 
                </h:column>
                <h:column>
                    <f:facet name="header">Nome</f:facet>
                    <h:outputLabel value="#{usuario.nome}">                        
                    </h:outputLabel>
                </h:column>
                <h:column>
                    <f:facet name="header">Login</f:facet>
                    <h:outputLabel value="#{usuario.login}">                        
                    </h:outputLabel>
                </h:column>
                <h:column>
                    <f:facet name="header">Perfil</f:facet>
                    <h:outputLabel value="#{usuario.perfilUsuario.descricao}">                        
                    </h:outputLabel>
                </h:column>
                <h:column>
                    <f:facet name="header">Tipo</f:facet>
                    <h:outputLabel value="#{usuario.tipoUsuario.descricao}">                        
                    </h:outputLabel>
                </h:column>
                <h:column>
                    <h:commandButton value="Editar" action="#{listaUsuarioBean.edit(usuario)}" />
                </h:column>
                <h:column>
                    <h:commandButton value="Deletar" action="#{listaUsuarioBean.delete(usuario)}" />
                </h:column>

            </h:dataTable>
            
            <h:messages style="color:red;" />
        </h:form>

        <h:panelGroup rendered="#{listaUsuarioBean.edit}">
            <h3>Alterar usuario #{listaUsuarioBean.usuario.idUsuario}</h3>
            <h:form>
                <p>Nome: <h:inputText value="#{listaUsuarioBean.usuario.nome}" /></p>
                <p>Login: <h:inputText value="#{listaUsuarioBean.usuario.login}" /></p>
                <p>Senha: <h:inputSecret value="#{listaUsuarioBean.usuario.senha}" /></p>
                    <h:commandButton value="Salvar" action="#{listaUsuarioBean.saveEdit}" />
                    <h:commandButton value="Cancelar" action="#{listaUsuarioBean.cancelEdit}" />
                </p>
            </h:form>
        </h:panelGroup>

    </h:body>
</html>

